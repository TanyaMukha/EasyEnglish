@using EasyEnglish.Theme.Components
@using EasyEnglish.Theme.Constants
@inject NavigationManager Navigation

<EasyEnglish.Theme.Components.ThemeProvider LoadingMessage="Loading Theme Demo...">
    <Router AppAssembly="@typeof(App).Assembly">
        <Found Context="routeData">
            <div class="demo-layout">

                <!-- Sidebar Navigation -->
                <aside class="demo-sidebar">
                    <div class="@ThemeConstants.CssClasses.Padding.Lg">
                        <h3 class="@ThemeConstants.CssClasses.H3 @ThemeConstants.CssClasses.TextPrimary @ThemeConstants.CssClasses.Margin.BottomLg">
                            🎨 Theme Demo
                        </h3>

                        <!-- Navigation Menu -->
                        <nav>
                            <div class="@ThemeConstants.CssClasses.Margin.BottomLg">
                                <h4 class="@ThemeConstants.CssClasses.Caption @ThemeConstants.CssClasses.TextSecondary @ThemeConstants.CssClasses.Margin.BottomSm">
                                    OVERVIEW
                                </h4>
                                <ul class="nav-menu">
                                    <li class="nav-item">
                                        <a href="/" class="nav-link @GetNavClass("/")"
                                           title="Home">
                                            🏠 Home
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/colors" class="nav-link @GetNavClass("/colors")"
                                           title="Colors">
                                            🎨 Colors
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/typography" class="nav-link @GetNavClass("/typography")"
                                           title="Typography">
                                            📝 Typography
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/components" class="nav-link @GetNavClass("/components")"
                                           title="Components">
                                            🧩 Components
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/themed-buttons" class="nav-link @GetNavClass("/themed-buttons")"
                                           title="Buttons">
                                            🔲 Buttons
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/themed-inputs" class="nav-link @GetNavClass("/themed-inputs")"
                                           title="Inputs">
                                            📝 Inputs
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/themed-badges" class="nav-link @GetNavClass("/themed-badges")"
                                           title="Badges">
                                            🏷️ Badges
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/themed-cards" class="nav-link @GetNavClass("/themed-cards")"
                                           title="Cards">
                                            📄 Cards
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/themed-progress" class="nav-link @GetNavClass("/themed-progress")"
                                           title="Progress Bar">
                                            📊 Progress Bar
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/themed-loading" class="nav-link @GetNavClass("/themed-loading")"
                                           title="Loading">
                                            🔄 Loading
                                        </a>
                                    </li>
                                </ul>
                            </div>

                            <div class="@ThemeConstants.CssClasses.Margin.BottomLg">
                                <h4 class="@ThemeConstants.CssClasses.Caption @ThemeConstants.CssClasses.TextSecondary @ThemeConstants.CssClasses.Margin.BottomSm">
                                    UTILITIES
                                </h4>
                                <ul class="nav-menu">
                                    <li class="nav-item">
                                        <a href="/spacing" class="nav-link @GetNavClass("/spacing")"
                                           title="Spacing">
                                            📏 Spacing
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/responsive" class="nav-link @GetNavClass("/responsive")"
                                           title="Responsive">
                                            📱 Responsive
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="/layout" class="nav-link @GetNavClass("/layout")"
                                           title="Layout">
                                            📐 Layout
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </nav>
                    </div>
                </aside>

                <!-- Main Content -->
                <main class="demo-content">
                    <div class="@ThemeConstants.CssClasses.Padding.Lg">
                        <RouteView RouteData="@routeData" />
                    </div>
                </main>

            </div>
        </Found>
        <NotFound>
            <div class="@ThemeConstants.CssClasses.ScreenCentered">
                <div class="@ThemeConstants.CssClasses.TextCenter">
                    <h1 class="@ThemeConstants.CssClasses.H1 @ThemeConstants.CssClasses.TextError @ThemeConstants.CssClasses.Margin.BottomMd">
                        404
                    </h1>
                    <p class="@ThemeConstants.CssClasses.BodyLarge @ThemeConstants.CssClasses.TextSecondary @ThemeConstants.CssClasses.Margin.BottomLg">
                        The page you're looking for doesn't exist.
                    </p>
                    <a href="/" class="@ThemeConstants.CssClasses.Button">
                        Go Home
                    </a>
                </div>
            </div>
        </NotFound>
    </Router>
</EasyEnglish.Theme.Components.ThemeProvider>

<style>
    .demo-layout {
        display: flex;
        min-height: 100vh;
        background-color: var(--color-background);
    }

    .demo-sidebar {
        width: 280px;
        background-color: var(--color-surface);
        border-right: 1px solid var(--color-border);
        overflow-y: auto;
    }

    .demo-content {
        flex: 1;
        overflow-y: auto;
    }

    .nav-menu {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .nav-item {
        margin-bottom: 4px;
    }

    .nav-link {
        display: block;
        padding: 8px 16px;
        color: var(--color-text-secondary);
        text-decoration: none;
        border-radius: var(--border-radius-md);
        transition: all 0.2s ease;
        font-size: 14px;
        font-weight: 500;
    }

    .nav-link:hover {
        background-color: var(--color-background-tertiary);
        color: var(--color-text-primary);
    }

    .nav-link.active {
        background-color: var(--color-primary);
        color: var(--color-white);
    }

    .nav-link.active:hover {
        background-color: var(--color-primary-light);
    }

    /* Responsive navigation */
    @@media (max-width: 768px) {
        .demo-layout {
            flex-direction: column;
        }
        
        .demo-sidebar {
            width: 100%;
            border-right: none;
            border-bottom: 1px solid var(--color-border);
        }
        
        .nav-menu {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .nav-item {
            margin-bottom: 0;
        }
        
        .nav-link {
            padding: 6px 12px;
            font-size: 12px;
        }
    }
</style>

@code {
    private string GetNavClass(string path)
    {
        var currentPath = Navigation.Uri.Replace(Navigation.BaseUri, "/").TrimEnd('/');
        if (string.IsNullOrEmpty(currentPath))
        {
            currentPath = "/";
        }

        return currentPath == path ? "active" : "";
    }
}